def downloadSchema = tasks.register("downloadSchema") {
    def targetDir = "${projectDir}/src/test/resources/"
    doLast {
        def address = 'https://mapbox.s3.amazonaws.com/mapbox-gl-native/event-schema/mobile-event-schemas.jsonl.gz'

        new File(targetDir + "${address.tokenize('/')[-1]}").withOutputStream { out ->
            new URL(address).withInputStream { from -> out << from }
        }
    }
}

tasks.withType(Test).configureEach {
    dependsOn(downloadSchema)
}
